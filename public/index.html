<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8" />
        <title>Login to Host</title>
        <style>
            body { font-family: sans-serif; margin: 2rem; }
            input, button { margin: 0.5rem 0; padding: 0.5rem; width: 300px; }
            #status { margin-top: 1rem; font-weight: bold; }
        </style>
</head>
<body>
<h2>Connect to Host</h2>
<input type="text" id="host" placeholder="Host (e.g. localhost)" />
<br />
<input type="password" id="password" placeholder="Password" />
<br />
<button onclick="connect()">Connect</button>
<div id="status"></div>

<script>
    let ws;

    function connect() {
        const host = document.getElementById('host').value;
        const password = document.getElementById('password').value;
        const status = document.getElementById('status');

        ws = new WebSocket(`ws://${window.location.host}`);

        ws.onopen = () => {
            ws.send(JSON.stringify({ type: 'auth', host, password }));
        };

        ws.onmessage = (msg) => {
            const response = JSON.parse(msg.data);
            if (response.type === 'auth') {
                if (response.success) {
                    status.textContent = '✅ Connected. Redirecting to game...';
                    setTimeout(() => {
                        window.location.href = '/game.html';
                    }, 1000);
                } else {
                    status.textContent = '❌ ' + response.message;
                }
            }
        };

        ws.onerror = () => {
            status.textContent = '⚠️ WebSocket error.';
        };
    }
</script>
</body>
</html>
